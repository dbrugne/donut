<% if (replace) { %>
    <div class="list <% if (typeof(search) !== 'undefined' && search == true) { %>search<% } %>">
        <% if (title) { %>
            <div class="title flex-child alone">
                <% if (search == true) { %><%= t('chat.search.roomstitle') %><% } else { %><%= t('chat.home.roomstitle') %><% } %>
            </div>
        <% } %>
        <% if (rooms.length < 1) { %>
            <div class="nothing mt20 mb20"><%= t('chat.search.noroom') %></div>
        <% } %>
<% } %>

    <% _.each(rooms, function(room) { %>
        <%
        var _name = (room.group)
          ? '#' + room.group.name + '/' + room.name.replace('#', '')
          : room.name;
        %>
        <div class="room dc-i-<%= room.color.replace('#', '').toLowerCase() %>">

            <div class="mini-card hidden">
                <div class="flex-parent">
                    <div class="avatar" style="background-image:url(<%= room.avatar %>)"></div>
                    <div class="ctn">
                        <span class="name">
                            <a href="<%= room.url %>"><%= _name %></a>
                            <span class="room-profile <%= room.mode %>"> </span>
                        </span>
                        <a class="dc-text" href="<%= room.join %>">
                            <%= t('actions.join') %>
                            <% if (room.users > 0) { %><%= room.users %><% } %>
                            <i class="icon icon-user-custom"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="cover">
                <div class="avatar" style="background-image:url(<%= room.avatar %>)"></div>
                <div class="top">
                    <div class="ctn">
                        <span class="name">
                            <a href="<%= room.url %>"><%= _name %></a>
                            <span class="room-profile <%= room.mode %>"> </span>
                        </span>
                        <% if (room.owner && room.owner.username) { %>
                        <span class="owner"><%= t('global.by') %> <a href="<%= room.owner.url %>" class="dc-text">@<%= room.owner.username %></a></span>
                        <% } %>
                    </div>
                    <!-- p class="topic"><%= room.topic %></p -->
                    <p class="join dc-back">
                        <a class="dc-text-contrast" href="<%= room.join %>" data-dismiss="modal">
                            <%= t('actions.join') %>
                            <% if (room.users > 0) { %><%= room.users %><% } %>
                            <i class="icon icon-user-custom"></i>
                        </a>
                    </p>
                </div>
            </div>
            <div class="back dc-back dc-text-contrast">
                <div class="ctn">
                    <p class="name dc-text-contrast open-room-profile" data-dismiss="modal" data-room-id="<%= room.room_id %>">
                        <a class="dc-text-contrast" href="<%= room.url %>"><%= _name %></a>
                        <span class="room-profile <%= room.mode %>"> </span>
                    </p>
                    <% if (room.owner && room.owner.username) { %>
                    <p class="owner"><%= t('global.by') %> <a href="<%=room.owner.url%>" class="open-user-profile dc-text-contrast" data-user-id="<%= room.owner.user_id %>">@<%= room.owner.username %></a></p>
                    <% } %>
                    <p class="description"><%= room.description %></p>
                </div>
                <p class="join dc-back dc-back-hover">
                    <a class="dc-text-contrast" href="<%= room.join %>">
                        <%= t('actions.join') %>
                        <% if (room.users > 0) { %><%= room.users %><% } %>
                        <i class="icon icon-user-custom"></i>
                    </a>
                </p>
            </div>
        </div>
    <% }); %>

<% if (replace) { %>
    </div>
<% } %>