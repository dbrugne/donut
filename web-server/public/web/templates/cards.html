<% _.each(cards, function(card) { %>
    <% var _color = card.color ? card.color.replace('#', '').toLowerCase() : 'default' %>

    <div class="card dc-i-<%= _color %> <%= card.type %> flex-parent">

        <% if(card.type === 'user') { %>

        <!--<div class="design-1">-->
            <!--<div class="flex-parent dc-back avatar-ctn dc-border-darker">-->
                <!--<a class="avatar img-circle open-user-profile" href="<%= card.url %>" data-user-id="<%=card.user_id%>" style="background-image:url(<%= card.avatar %>)"></a>-->
            <!--</div>-->

            <!--<a href="<%=card.owner_url%>" class="username open-user-profile dc-border dc-text" data-user-id="<%= card.user_id %>">@<%= card.username %></a>-->
            <!--<div class="location dc-border"><%= card.location %></div>-->

            <!--<div class="flex-parent dc-back action dc-border-darker">-->
                <!--<a class="dc-text-contrast" href="<%= card.join %>">-->
                    <!--<%= t('actions.discuss') %>-->
                <!--</a>-->
            <!--</div>-->
        <!--</div>-->

        <div class="design-2">
            <div class="flex-parent">
                <div class="flex-parent column">
                    <a class="avatar open-user-profile" href="<%= card.url %>" data-user-id="<%=card.user_id%>" style="background-image:url(<%= card.avatar %>)"></a>
                </div>
                <div class="flex-child">
                    <a href="<%=card.owner_url%>" class="username open-user-profile dc-border dc-text" data-user-id="<%= card.user_id %>">@<%= card.username %></a>
                    <div class="location dc-border"><%= card.location %></div>

                    <div class="flex-parent dc-back action dc-border-darker">
                        <a class="dc-text-contrast" href="<%= card.join %>">
                            <%= t('actions.discuss') %>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <% } else if(card.type === 'group') { %>

        <% } else if(card.type === 'room') { %>
            <% var inGroup = !!card.group; %>
            <% var identifierHtml = card.identifier.indexOf('/') !== -1
                ? '<div class="groupname">' + card.identifier.replace('#', '').split('/')[0] + '</div><div class="roomname">/' + card.identifier.replace('#', '').split('/')[1] + '</div>'
                : '<div class="roomname">' + card.identifier + '</div>'; %>

            <div class="flex-parent flex-child relative">
                <div class="flex-child flex-parent column dc-back img-ctn dc-border-darker">
                    <% if(card.group_id) { %>
                        <span class="flex-child flex-parent">
                            <a class="relative avatar-group dc-border-darker open-group-profile img-circle" href="<%= card.group_url %>" data-group-id="<%=card.group_id%>" style="background-image:url(<%= card.group_avatar %>)"></a>
                        </span>
                    <% } %>
                    <span class="flex-child flex-parent">
                        <a class="relative avatar dc-border-darker open-room-profile img-circle" href="<%= card.url %>" data-room-id="<%=card.room_id%>" style="background-image:url(<%= card.avatar %>)"></a>
                    </span>
                    <div class="room-profile img-circle dc-border-darker dc-back-darker dc-text-contrast curp" data-toggle="tooltip" data-placement="top" title="<%= t('global.mode.description.' + card.mode) %>">
                        <%= t('global.mode.title.' + card.mode) %>
                    </div>
                </div>
                <div class="flex-child flex-parent column content-ctn">
                    <a href="<%= card.url %>" class="name open-room-profile" data-room-id="<%=card.room_id%>"><%= identifierHtml %></a>
                    <span class="owner">
                        <% if (card.owner_id) { %>
                            <%= t('global.by') %> <a href="<%= card.owner_url %>">@<%= card.owner_username %></a>
                        <% } %>
                    </span>
                    <div class="flex-child"></div>
                    <div class="actions flex-parent jc-center">
                        <a class="btn btn-default mr5 flex-child" href="<%= card.join %>" data-dismiss="modal">
                            <%= t('actions.join') %>
                            <% if (card.users > 0) { %><%= card.users %><% } %>
                            <i class="icon icon-user-custom cl-warning"></i>
                        </a>
                        <span class="btn btn-default curp flex-child open-room-profile" data-dismiss="modal" data-room-id="<%=card.room_id%>">
                            View profile
                        </span>
                    </div>
                </div>
            </div>

        <% } %>

    </div>
<% }); %>
