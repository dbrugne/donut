<% _.each(cards, function(card) { %>
    <% var _color = card.color ? card.color.replace('#', '').toLowerCase() : 'default' %>

    <div class="card dc-i-<%= _color %> card-<%= card.type %>">

        <% if(card.type === 'user') { %>

        <div class="relative design-room1 dc-border">
            <div class="ctn flex-parent column">
                <a class="user-avatar open-user-profile" href="<%= card.url %>" data-user-id="<%=card.user_id%>" style="background-image:url(<%= card.avatar %>)"></a>
                <div class="name">
                    <a href="<%= card.join %>" class="open-user-profile flex-child flex-parent center jc-center" data-user-id="<%=card.user_id%>">
                        <span class="roomname">@<%= card.username %></span>
                    </a>
                    <% if (card.location) { %>
                        <span class="owner flex-child flex-parent  center jc-center">
                            <%=card.location%>
                        </span>
                    <% } %>
                </div>
                <div class="description flex-child">
                    <%= card.bio %>
                </div>
                <div class="actions flex-parent">
                    <div class="mode-ctn text-center">
                        <div class="users">

                        </div>
                    </div>
                    <div class="btn-ctn flex-child flex-parent jc-center">
                        <% if(card.join) { %>
                        <a class="btn btn-default clean join flex-child relative" href="<%= card.join %>">
                            <%= t('actions.discuss') %>
                            <i class="icon icon-in dc-text"></i>
                        </a>
                        <% } else { %>
                        <a class="btn btn-default open-user-profile" data-dismiss="modal" href="<%=card.url%>" data-user-id="<%=card.user_id%>">
                            <%= t('global.view-profile') %>
                        </a>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

       <% } else if(card.type === 'group') { %>

        <div class="relative design-room1 dc-border">
            <div class="ctn flex-parent column">
                <a class="user-avatar open-group-profile img-circle" href="<%= card.url %>" data-group-id="<%=card.group_id%>" style="background-image:url(<%= card.avatar %>)"></a>
                <div class="name">
                    <a href="<%= card.join %>" class="open-group-profile flex-child flex-parent center jc-center" data-group-id="<%=card.group_id%>">
                        <span class="roomname"><%=card.identifier%></span>
                    </a>
                    <% if (card.owner_id) { %>
                        <span class="owner flex-child flex-parent  center jc-center">
                            <%= t('global.by') %> <a class="dc-text open-user-profile ml5" href="<%= card.owner_url %>" data-user-id="<%= card.owner_id %>">@<%= card.owner_username %></a>
                        </span>
                    <% } %>
                </div>
                <div class="description flex-child">
                    <%= card.description %>
                </div>
                <div class="actions flex-parent">
                    <div class="mode-ctn text-center">
                        <div class="mode" data-toggle="tooltip" data-placement="top" title="<%= t('global.mode.description.' + (card.mode === 'public' ? 'public' : 'private' + (card.allow_user_request ? '-invites' : '') + (card.allow_group_member ? '-group' : ''))) %>">
                            <%= t('global.mode.title.' + (card.mode === 'public' ? 'public' : 'private' + (card.allow_user_request ? '-invites' : '') + (card.allow_group_member ? '-group' : ''))) %>
                        </div>
                        <div class="users">
                            <i class="icon icon-user-custom dc-text"></i> <%= card.users %>
                        </div>
                    </div>
                    <div class="btn-ctn flex-child flex-parent jc-center">
                        <% if(card.join) { %>
                        <a class="btn btn-default clean join flex-child relative" href="<%= card.join %>">
                            <%= t('actions.join') %>
                            <i class="icon icon-in dc-text"></i>
                        </a>
                        <% } else { %>
                        <a class="btn btn-default open-group-profile" data-dismiss="modal" href="<%=card.url%>" data-group-id="<%=card.group_id%>">
                            <%= t('global.view-profile') %>
                        </a>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

        <% } else if(card.type === 'room') { %>

        <div class="relative design-room1 dc-border">
            <div class="ctn flex-parent column">
                <a class="user-avatar open-room-profile img-circle" href="<%= card.join %>" data-room-id="<%=card.room_id%>" style="background-image:url(<%= card.avatar %>)"></a>
                <div class="name">
                   <a href="<%= card.join %>" class="open-room-profile flex-child flex-parent center jc-center" data-room-id="<%=card.room_id%>">
                       <span class="roomname"><%=card.identifier%></span>
                   </a>
                   <% if (card.owner_id) { %>
                        <span class="owner flex-child flex-parent  center jc-center">
                            <%= t('global.by') %> <a class="dc-text open-user-profile ml5" href="<%= card.owner_url %>" data-user-id="<%= card.owner_id %>">@<%= card.owner_username %></a>
                        </span>
                    <% } %>
                </div>
                <div class="description flex-child">
                    <%= card.description %>
                </div>
                <div class="actions flex-parent">
                    <div class="mode-ctn text-center">
                        <div class="mode" data-toggle="tooltip" data-placement="top" title="<%= t('global.mode.description.' + (card.mode === 'public' ? 'public' : 'private' + (card.allow_user_request ? '-invites' : '') + (card.allow_group_member ? '-group' : ''))) %>">
                            <%= t('global.mode.title.' + (card.mode === 'public' ? 'public' : 'private' + (card.allow_user_request ? '-invites' : '') + (card.allow_group_member ? '-group' : ''))) %>
                        </div>
                        <div class="users">
                            <i class="icon icon-user-custom dc-text"></i> <%= card.users %>
                        </div>
                    </div>
                    <div class="btn-ctn flex-child flex-parent jc-center">
                        <% if(card.join) { %>
                            <a class="btn btn-default clean join flex-child relative" href="<%= card.join %>">
                                <%= t('actions.join') %>
                                <i class="icon icon-in dc-text"></i>
                            </a>
                        <% } else { %>
                            <a class="btn btn-default open-room-profile" data-dismiss="modal" href="<%=card.url%>" data-room-id="<%=card.room_id%>">
                                <%= t('global.view-profile') %>
                            </a>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

        <% } %>

    </div>
<% }); %>