<!doctype html>
<html>
<head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <script src="/vendor/jquery/dist/jquery.min.js"></script>
    <script src="/vendor/cloudinary_js/js/jquery.cloudinary.js"></script>
    <style>
        body { font-family: 'Open Sans', sans-serif; font-size: 12px; padding: 5px; }
        .content {}
        .content .image { margin: 10px; border: 1px solid lightgray; padding: 5px; display: inline-block; }
        .content .image .caption { display: block; text-align: center; }
        .content .image img { }
    </style>
    </head>
<body>
<form role="form" id="settings">
    <input type="text" name="cloudinary_id" value="qcdjwa4jzbmivioq6thj">
    <!-- input type="text" name="cloudinary_id" value="v1408565767/qcdjwa4jzbmivioq6thj.jpg" -->
    <input type="button" value="OK">
</form>
<div class="content"></div>
<script>
$(document).ready(function() {
    $.cloudinary.config({
        cloud_name: 'roomly',
        api_key: '962274636195222'
    });
    $.c = {
        avatar: function(identifier, size, background) {
            return this._url(identifier, false, 'room-avatar-default.png', size, background);
        },
        roomAvatar: function(identifier, transformation) {
            return this._url(identifier, transformation, 'default/room-avatar-default.jpg');
        },
        roomPoster: function(identifier, transformation) {
            return this._url(identifier, transformation, 'default/room-poster-default.jpg');
        },
        userAvatar: function(identifier, transformation) {
            return this._url(identifier, transformation, 'default/user-avatar-default.jpg');
        },
        userPoster: function(identifier, transformation) {
            return this._url(identifier, transformation, 'default/user-poster-default.jpg');
        },
        _url: function(identifier, transformation, defaultIdentifier, size, background) {
            defaultIdentifier = defaultIdentifier || 'default/default.jpg';
            size = size || 20;
            background = background || '#FFFFFF';

            if (!identifier)
                identifier = defaultIdentifier;

            var options = {
                crop: 'fill',
                gravity: 'face',
                default_image: defaultIdentifier,
                width: ''+size,
                height: ''+size,
                background: 'rgb:'+background.replace('#', '').toLocaleLowerCase(),
                fetch_format: 'jpg'
            };

            if (transformation)
                options.transformation = transformation;

            return $.cloudinary.url(identifier, options);
        }
    };
    render();
});
function addImage(url, caption) {
    caption = caption || '';
    $('.content').append('<div class="image"><img src="'+url+'"><span class="caption">'+caption+'</span></div>');
}
function render() {
    var cid = $('input[name=cloudinary_id]').val();

    addImage($.c.avatar(cid, 30, '#FF0000'), 'avatar 30 (real ID)');
    addImage($.c.avatar(cid, 90, '#FF0000'), 'avatar 90 (real ID)');
    addImage($.c.avatar(cid, 160, '#FF0000'), 'avatar 160 (real ID)');
    addImage($.c.avatar('', 30, '#FF0000'), 'avatar 30 (no ID)');
    addImage($.c.avatar('', 90, '#FF0000'), 'avatar 90 (no ID)');
    addImage($.c.avatar('', 160, '#FF0000'), 'avatar 160 (no ID)');
    addImage($.c.avatar('qdsqdqdsqd', 30, '#FF0000'), 'avatar 30 (x ID)');
    addImage($.c.avatar('qdsq', 90, '#FF0000'), 'avatar 90 (x ID)');
    addImage($.c.avatar('sqdsqdsqdsq', 160, '#FF0000'), 'avatar 160 (x ID)');

    // real ID
    /*
    addImage($.c.roomAvatar(cid, 'room-xlarge'), 'room-xlarge (real ID)');
    addImage($.c.roomAvatar(cid, 'room-large'), 'room-large (real ID)');
    addImage($.c.roomAvatar(cid, 'room-medium'), 'room-medium (real ID)');
    addImage($.c.roomAvatar(cid, 'room-small'), 'room-small (real ID)');
    addImage($.c.userAvatar(cid, 'user-xlarge'), 'user-xlarge (real ID)');
    addImage($.c.userAvatar(cid, 'user-large'), 'user-large (real ID)');
    addImage($.c.userAvatar(cid, 'user-medium'), 'user-large (real ID)');
    addImage($.c.userPoster(cid, 'user-poster'), 'user-poster (real ID)');
    addImage($.c.roomPoster(cid, 'room-poster'), 'room-poster (real ID)');
    addImage($.c.roomPoster(cid, 'room-poster-blured'), 'room-poster-blured (real ID)');

    // bad ID
    $('.content').append('<hr>');
    addImage($.c.roomAvatar(cid+'existepas', 'room-xlarge'), 'room-xlarge (bad ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-large'), 'room-large (bad ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-medium'), 'room-medium (bad ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-small'), 'room-small (bad ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-xlarge'), 'user-xlarge (bad ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-large'), 'user-large (bad ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-medium'), 'user-large (bad ID)');
    addImage($.c.userPoster(cid+'existepas', 'user-poster'), 'user-poster (bad ID)');
    addImage($.c.roomPoster(cid+'existepas', 'room-poster'), 'room-poster (bad ID)');
    addImage($.c.roomPoster(cid+'existepas', 'room-poster-blured'), 'room-poster-blured (bad ID)');

    // empty ID
    $('.content').append('<hr>');
    addImage($.c.roomAvatar(cid+'existepas', 'room-xlarge'), 'room-xlarge (empty ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-large'), 'room-large (empty ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-medium'), 'room-medium (empty ID)');
    addImage($.c.roomAvatar(cid+'existepas', 'room-small'), 'room-small (empty ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-xlarge'), 'user-xlarge (empty ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-large'), 'user-large (empty ID)');
    addImage($.c.userAvatar(cid+'existepas', 'user-medium'), 'user-large (empty ID)');
    addImage($.c.userPoster(cid+'existepas', 'user-poster'), 'user-poster (empty ID)');
    addImage($.c.roomPoster(cid+'existepas', 'room-poster'), 'room-poster (empty ID)');
    addImage($.c.roomPoster(cid+'existepas', 'room-poster-blured'), 'room-poster-blured (empty ID)');
*/
}
</script>
</body>
</html>